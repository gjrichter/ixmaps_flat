<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ixmaps embed example">
    <meta name="author" content="guenter richter">
    <link rel="shortcut icon" href="https://gjrichter.github.io/ixmaps/ui/resources/images/ixmaps_logo.png">

    <title>iXMaps Composer</title>
</head>

<body style="padding:0;margin:0">

    <!-- here goes the map -->
    <div id="map-div"></div>

    <!-- include the ixmaps API -->
    <script src="../../ui/js/htmlgui_flat.js"></script>

    <script type="text/javascript" charset="utf-8">
        // create and embed the map
        // ! reference to "map-div", the hosting html div

        ixmaps.embed("map-div", {
                mapService: "leaflet_vt",
                mapType: "VT_VOYAGER_LIGHT",
                name: "map_1",
                mode: "pan",
                legend: "true",
                tools: "true",
                search: "Europe",
                about: "test"
            },
            map => map
            .options({
                featurescaling: "true",
                objectscaling: "dynamic",
                normalSizeScale: "10000000",
                flushChartDraw: "1000000",
                basemapopacity: "0.5",
                worksilent: "true",
                loadsilent: "true",
                hideOnPan: "false",
                freezeOnPan: "false"
            })
            .local("working ...", "")
            .require("../../ui/js/tools/tooltip_basic.js")
            .attribution("powered by <a href=\"http://ixmaps.com\" target=\"_blank\">iXMaps</a>")
            .view({
                "center": {
                    "lat": "46.2560066833692",
                    "lng": "12.379353078373342"
                },
                "zoom": "5.872529739982796"
            })
            .layer(ixmaps.layer("generic", layer => layer
                .data({
                    "url": "https://dis2datalake.blob.core.windows.net/airquality-derivated/AQI/content/raw_stations.json.24090200",
                    "type": "json",
                    "name": "data945921122416939"
                })
                .binding({
                    "geo": "lat|lon",
                    "value": "station_type"
                })
                .type("CHART|BUBBLE|MULTIPLE|GROUP|RECT|CATEGORICAL|NOSIZE|SUM")
                .style({
                    "colorscheme": [
                        "#AFB4B8",
                        "#2581FA",
                        "#FF7F0E"
                    ],
                    "fillopacity": "0.7",
                    "shadow": "false",
                    "visible": "true",
                    "showdata": "true",
                    "symbols": [
                        "circle"
                    ],
                    "values": [
                        "Background",
                        "Traffic",
                        "Industrial"
                    ],
                    "label": [
                        "Background",
                        "Traffic",
                        "Industrial"
                    ],
                    "units": "",
                    "refreshtimeout": "0",
                    "scale": "0.5",
                    "sizepow": "2",
                    "valuescale": "1",
                    "valuedecimals": "0",
                    "centerpart": "max",
                    "gridx": "5",
                    "gridwidthpx": "40",
                    "name": "data945921122416939",
                    "title": "Type of air quality stations*",
                    "snippet": "",
                    "description": "*) grouped by zoom dependent grid",
                    "tooltip": "{{theme.item.chart}}{{theme.item.data}}"
                })
            ))
        );

        ixmaps.htmlgui_onZoomAndPan = () => {
            //alert("xxxx");
        };

    </script>
</body>

</html>
