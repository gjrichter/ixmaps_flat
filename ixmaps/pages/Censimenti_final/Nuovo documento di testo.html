<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>iXmaps NUTS2 Data</title>
    <!-- Include the iXmaps API -->
    <script src="https://gjrichter.github.io/ixmaps_test/ui/js/htmlgui_api.js"></script>
    <style>
        /* Set the size of the map */
        #map-div {
            height: 100vh;
            width: 100%;
        }
    </style>
</head>
<body style="margin:0;padding:0;">

    <!-- The div where the map will be embedded -->
    <div id="map-div"></div>

    <script type="text/javascript">
        // Embed the map using iXmaps API
        ixmaps.embed("map-div", {
            mapService: "leaflet_vt",
            mapType: "ArcGIS - Topo",  // You can change this to your preferred map type
            name: "map_1",
            mode: "pan",
            legend: "false",  // Turn off legend
            tools: "false",   // Turn off tools
            search: "Europe", // Search focus on Europe
            about: "NUTS2 regions of Italy"
        },
        map => map
        .options({
            featurescaling: "true",
            objectscaling: "dynamic",
            normalSizeScale: "50000",
            flushChartDraw: "1000000",
            flushPaintShape: "1000000",
            basemapopacity: "0.5",
            worksilent: "false",
            loadsilent: "false",
            hideOnPan: "false",
            freezeOnPan:"false",
        })
        .view({
            center: {
                lat: 41.87194, // Latitude of Italy's center
                lng: 12.56738  // Longitude of Italy's center
            },
            zoom: 6  // Set zoom level for Italy (zoom 6 works well for Italy)
        })
.layer(ixmaps.layer("nuts2", layer => layer
  .data({
    url: "https://gisco-services.ec.europa.eu/distribution/v2/nuts/geojson/NUTS_RG_10M_2021_4326_LEVL_2.geojson",
    type: "geojson",
    name: "DBTABLE43754815"
  })
  .filter("WHERE CNTR_CODE = IT")
  .binding({
    geo: "geometry",
    value: "$item$",
    id: "NUTS_ID"
  })
  .type("FEATURES|NOLEGEND")
  .style({
    colorscheme: [
      "red" // Set the color scheme to red
    ],
    fillopacity: "0.8",
    shadow: "false",
    visible: "true",
    datacache: "true",
    showdata: "true",
    units: "",
    refreshtimeout: "0",
    scale: "1",
    sizepow: "2",
    linecolor: ["#F7F6EF"],
    linewidth: "2",
    titlefield: "NUTS_NAME",
    featurelower: "1:2000000",
    valuescale: "1",
    name: "nuts2",
    title: "layer"
  })
        )));  <!-- Closing the parentheses properly -->
    </script>

</body>
</html>

