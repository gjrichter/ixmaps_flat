<!DOCTYPE HTML>
<html>

<head>
	<title>IXMAPS embed</title>
	<meta name="Author" content="Guenter Richter" />
	<meta name="Keywords" content="map SVG HTML5 Javascript maps interactive charts ixmaps" />
	<meta name="Description" content="core html page for ixmaps SVG interactive map applications in overlay on leaflet basemaps" />

	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

	<!-- IE Fix for HTML5 Tags -->
	<!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

	<!--========================================================================= 
	  we need scripting
	<!--========================================================================= -->

	<noscript>
		<div style="position:absolute;top:100px;left:100px;width:500px">
			<b>JavaScript must be enabled in order for you to use iXMaps.</b>
			<br>
			<br> However, it seems JavaScript is either disabled or not supported by your browser. To view the map application, enable
			JavaScript by changing your browser options, and then try again.
		</div>
	</noscript>

	<!--========================================================================= -->

	<link rel="shortcut icon" href="https://gjrichter.github.io/ixmaps_mono/ui/resources/images/ixmaps_logo.png" />

	<!--========================================================================= -->
	
	<link rel="stylesheet" type="text/css" href="https://gjrichter.github.io/ixmaps_mono/ui/css/ixmaps.css" />

	<!--========================================================================= -->

</head>

<body style="margin:0px;padding:0px;overflow:hidden;">

	<!--========================================================================= 
		the map space
	<!--========================================================================= -->

	<div id="ixmap" style="position:relative;top:0px;left:0px;overflow:hidden;font-size:11px;background:none;">
	</div>	

	<!--========================================================================= 
		loading, messages, help etc
	<!--========================================================================= -->

	<div id="divlogo" style="pointer-events:none;z-index:99;visibility:hidden;">
		<div id="logo-image">
			<span>application:</span>
			<img alt="logo" src="../resources/images/ixmaps_logo_grey_transparent.png" />
		</div>
	</div>

	<div id="divloading" style="pointer-events:none;z-index:9999">
		<div id="loading-text-div" class="loading-text-div">
			<span id="loading-text" class="loading-text">.&nbsp;&nbsp;</span>
			<div id="loading-gif" style="display:none">
				<img src="../resources/images/loading_blue.gif" />
			</div>
		</div>
	</div>

	<div id="attribution-div">
		<span id="attribution"></span>
		<span>|</span>
		<span class="map-footer"><a href="javascript:ixmaps.popupTools()">tools</a></span>
	</div>

	<div id="divstart" style="	visibility:hidden;
								position:absolute;
								top:0px;
								left:0px;
								width:100%;
								height:100%;
								z-index:1000;">
		<div id="start-text-div" style="position:absolute;top:45%;left:40%">
			<a id="start-text" href="javascript:__startMap()" style="font-family:serif;
								font-size:48px;
								color:#666666;
								background-color:#dddddd;
								padding: 0px 12px 3px 8px;
								-moz-border-radius: 15px;
								border-radius: 15px;
								text-align:center">start</a>
			</p>
		</div>
	</div>
	<div id="velo" style="	visibility:hidden;
								background-color:#444444;
								opacity:0.2;
								position:absolute;
								top:0px;
								left:0px;
								width:100%;
								height:100%;
								z-index:1000;" width="100%" height="100%">
	</div>

	<div id="tooltip" style="position:absolute;top:0;left:0;z-index:999999">
	</div>

	<!--========================================================================= -->
</body>

<script type="text/javascript" src="https://gjrichter.github.io/ixmaps_mono/ui/libs/jquery/jquery-1.7.1.min.js"></script>
<script type="text/javascript" src="https://gjrichter.github.io/ixmaps_mono/ui/js/htmlgui.js"></script>
<script type="text/javascript" src="https://gjrichter.github.io/ixmaps_mono/ui/js/htmlgui_api_api.js"></script>

<!--========================================================================= -->

<script type="text/javascript">
	(function(ixmaps, $, undefined) {

		var data = [{
			name: "Roma",
			pop: "2 875 472",
			lat: "41.893056",
			lon: "12.482778"
		}, {
			name: "Parigi",
			pop: "7 389 520",
			lat: "48.856667",
			lon: "2.351944"
		}, {
			name: "Berlino",
			pop: "3 531 201",
			lat: "52.518611",
			lon: "13.408056"
		}, {
			name: "Londra",
			pop: "8 787 892",
			lat: "51.507222",
			lon: "-0.1275"
		}];

		chart = ixmaps.layer("chart", layer => layer
			.data(data, "json")
			.binding({
				"value": "pop",
				"geo": "lat|lon"
			})
			.style({
				"type": "CHART|BUBBLE|VALUES",
				"colorscheme": [
					"#bb2233"
				],
				"fillopacity": "0.5",
				"showdata": "true",
				"units": "",
				"normalsizevalue": "1000000",
				"scale": "1",
				"title": "Population"
			})
		);

		ixmaps.fLegendVisible = true;

		var szControls = "small";
		var szSvgLegendFlag = "nolegend";
		var szHTMLLegendFlag = "1";

		// GR 12.02.2015 define fallback default map, used if parameter SVGGIS is empty  
		var szDefaultMap = "https://gjrichter.github.io/ixmaps_mono/maps/svg/maps/generic/mercator.svg";

		$(document).ready(function() {

			$.when(
				$.getScript("https://gjrichter.github.io/ixmaps_mono/ui/libs/leaflet-1.3.4/leaflet.js"),
				$.getScript("https://gjrichter.github.io/ixmaps_mono/ui/libs/getUrlParam/js/jquery.getUrlParam.js"),
				$.getScript("https://gjrichter.github.io/ixmaps_mono/ui/libs/messagebox.js"),
				$.getScript("https://gjrichter.github.io/ixmaps_mono/ui/js/htmlgui_sync.js"),
				$.getScript("https://gjrichter.github.io/ixmaps_mono/ui/js/htmlgui_sync_Leaflet.js"),
				$.getScript("https://gjrichter.github.io/ixmaps_mono/ui/js/htmlgui_dialog.js"),
				$.getScript("https://gjrichter.github.io/ixmaps_mono/ui/js/htmlgui_story.js"),
				$.Deferred(function(deferred) {
					$(deferred.resolve);
				})
			).done(function() {

				// ====================
				// create the map app
				// ====================

				var szMap = (szMap && (szMap != "null")) ? szMap : szDefaultMap;
				map = new ixmaps.map("ixmap", {
					mapService: "leaflet",
					maptype: decodeURIComponent($(document).getUrlParam('maptype')),
					svg: szMap,
					mapsize: "fullscreen",
					footer: ixmaps.footer || 0,
					mode: szSvgLegendFlag,
					controls: szControls,
					silent: decodeURIComponent($(document).getUrlParam('silent'))
				});
				var oldReady = ixmaps.onMapReady;
				ixmaps.onMapReady = function(szMap) {
					ixmaps.onMapReady = null;
					var api = ixmaps.api(szMap);
					map.require("https://gjrichter.github.io/ixmaps_mono/ui/js/tools/tooltip_basic.js");
					api.view([46.694667307773116, 14.809570312500002], 4);
					api.layer(chart);
				};

				ixmaps.fSyncMap = $(document).getUrlParam('sync') ? ($(document).getUrlParam('sync') == "true") : true;

				ixmaps.setAutoSwitchInfo(true);

			});

			//htmlMap_enableScrollWheelZoom();
		});



	}(window.ixmaps = window.ixmaps || {}, jQuery));

</script>

</html>
